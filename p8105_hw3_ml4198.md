p8105\_hw3\_ml4198
================
Matthew Lawlor
10/12/2020

## Problem 1

``` r
library(p8105.datasets)
data("instacart")
```

This is a dataframe of Instacart orders with 17 variables and 1,384,617
entries. Key variables are user\_id, order\_id, product\_id, aisle\_id.

``` r
instacart %>% 
    group_by(aisle_id) %>% 
  summarize(
    n_obs = n()
    ) %>% 
  mutate(
    freq_rank = min_rank(desc(n_obs))
    ) %>% 
  filter(freq_rank < 10)
```

    ## `summarise()` ungrouping output (override with `.groups` argument)

    ## # A tibble: 9 x 3
    ##   aisle_id  n_obs freq_rank
    ##      <int>  <int>     <int>
    ## 1       21  41699         5
    ## 2       24 150473         2
    ## 3       83 150609         1
    ## 4       84  32644         7
    ## 5       91  26240         9
    ## 6      107  31269         8
    ## 7      115  36617         6
    ## 8      120  55240         4
    ## 9      123  78493         3

There are 134 aisles, and the most commonly ordered from are aisle 83
(150609 orders), 24 (150473 orders), and 123 (78493 orders).

**Code for figure 1**

``` r
instacart %>% 
    group_by(aisle_id) %>% 
  summarize(
    n_obs = n()
    ) %>% 
  mutate(
    freq_rank = min_rank(desc(n_obs))
    ) %>% 
  filter(n_obs > 10000) %>% 
  arrange(freq_rank) %>% 
  ggplot(aes(x = freq_rank, y = n_obs, color = aisle_id)) +
  geom_point() + 
  scale_x_continuous(
    breaks = c(1, 5, 10, 15, 20, 25, 30, 35),
    minor_breaks = c(1:39)) +
  labs(
    x = "Aisle Rank",
    y = "Number of items ordered",
    title = "Figure 1",
    color = "Aisle ID"
  )
```

    ## `summarise()` ungrouping output (override with `.groups` argument)

<img src="p8105_hw3_ml4198_files/figure-gfm/unnamed-chunk-2-1.png" width="90%" />

**Code for table 1**

``` r
instacart %>% 
  select(aisle, product_name) %>% 
  filter(aisle == c("baking ingredients", "dog food care", "packaged vegetables fruits")) %>% 
  group_by(aisle, product_name) %>% 
  summarize(n_obs = n()) %>% 
  arrange(aisle, desc(n_obs)) %>% 
  filter(min_rank(desc(n_obs)) < 4)
```

    ## `summarise()` regrouping output by 'aisle' (override with `.groups` argument)

    ## # A tibble: 9 x 3
    ## # Groups:   aisle [3]
    ##   aisle                      product_name                                  n_obs
    ##   <chr>                      <chr>                                         <int>
    ## 1 baking ingredients         Light Brown Sugar                               157
    ## 2 baking ingredients         Pure Baking Soda                                140
    ## 3 baking ingredients         Organic Vanilla Extract                         122
    ## 4 dog food care              Organix Grain Free Chicken & Vegetable Dog Fâ€¦    14
    ## 5 dog food care              Organix Chicken & Brown Rice Recipe              13
    ## 6 dog food care              Original Dry Dog                                  9
    ## 7 packaged vegetables fruits Organic Baby Spinach                           3324
    ## 8 packaged vegetables fruits Organic Raspberries                            1920
    ## 9 packaged vegetables fruits Organic Blueberries                            1692
